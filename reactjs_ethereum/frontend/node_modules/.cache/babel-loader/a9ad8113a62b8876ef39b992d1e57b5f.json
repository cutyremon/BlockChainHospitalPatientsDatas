{"ast":null,"code":"/* global self */\n'use strict';\n\nmodule.exports = function (domain, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n\n  opts = opts || {};\n  domain = encodeURIComponent(domain);\n  var url = \"https://ipfs.io/api/v0/dns?arg=\".concat(domain);\n  Object.keys(opts).forEach(function (prop) {\n    url += \"&\".concat(encodeURIComponent(prop), \"=\").concat(encodeURIComponent(opts[prop]));\n  });\n  self.fetch(url, {\n    mode: 'cors'\n  }).then(function (response) {\n    return response.json();\n  }).then(function (response) {\n    if (response.Path) {\n      return callback(null, response.Path);\n    } else {\n      return callback(new Error(response.Message));\n    }\n  }).catch(function (error) {\n    callback(error);\n  });\n};","map":null,"metadata":{},"sourceType":"script"}